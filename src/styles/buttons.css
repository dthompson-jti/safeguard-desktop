/* src/styles/buttons.css */

/* --- Base Button --- */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  /* Add gap for icon + text layouts */
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s, box-shadow 0.2s, border-color 0.2s;
  box-sizing: border-box;
  line-height: 1;
  border: 1px solid transparent;
  font-family: var(--font-family-sans);
  font-size: var(--font-size-sm);
  white-space: nowrap;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.btn .material-symbols-rounded {
  transition: color 0.2s;
}

/* --- Loading State --- */
.btn[data-loading="true"] {
  pointer-events: none;
}

/* ======================================================================== */
/*                              SIZE VARIANTS                               */
/* ======================================================================== */

/* --- Medium (m) - Desktop Standard --- */
.btn[data-size="m"] {
  /* Desktop Medium */
  height: var(--control-height-md);
  padding: 0 var(--spacing-3);
  /* 12px */
  border-radius: var(--radius-md);
  gap: var(--spacing-1);
  /* 4px */
}

.btn[data-size="m"][data-icon-only="true"] {
  width: var(--control-height-md);
  padding: 0;
  border-radius: var(--radius-md);
  gap: 0;
}

.btn[data-size="m"] .material-symbols-rounded {
  font-size: var(--icon-size-md);
  font-variation-settings: 'opsz' 20;
}

/* --- Large (lg) --- */
.btn[data-size="lg"] {
  height: var(--control-height-lg);
  padding: var(--spacing-3) var(--spacing-5);
  border-radius: var(--spacing-3);
  gap: var(--spacing-2);
}

.btn[data-size="lg"][data-icon-only="true"] {
  width: var(--control-height-lg);
  padding: 0;
  border-radius: var(--radius-md);
  gap: 0;
}

.btn[data-size="lg"] .material-symbols-rounded {
  font-size: var(--icon-size-lg);
}

/* --- Small (s) --- */
.btn[data-size="s"] {
  height: var(--control-height-sm);
  padding: 0 var(--spacing-2p5);
  /* 10px */
  border-radius: var(--radius-md);
  gap: var(--spacing-1);
  /* 4px */
}

.btn[data-size="s"][data-icon-only="true"] {
  width: var(--control-height-sm);
  padding: 0;
  border-radius: var(--radius-md);
  gap: 0;
}

.btn[data-size="s"] .material-symbols-rounded {
  font-size: var(--icon-size-md);
  font-variation-settings: 'opsz' 20;
}

/* --- Extra Small (xs) --- */
.btn[data-size="xs"] {
  height: var(--control-height-xs);
  padding: 0 var(--spacing-2);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  gap: var(--spacing-1);
}

.btn[data-size="xs"][data-icon-only="true"] {
  width: var(--control-height-xs);
  padding: 0;
  border-radius: var(--radius-sm);
  gap: 0;
}

.btn[data-size="xs"] .material-symbols-rounded {
  font-size: var(--icon-size-sm);
  font-variation-settings:
    'FILL' 0,
    'wght' 400,
    'GRAD' 0,
    'opsz' 16;
}

/* ======================================================================== */
/*                             STYLE VARIANTS                               */
/* ======================================================================== */

/* --- Primary Button --- */
.btn[data-variant="primary"] {
  background-color: var(--control-bg-theme);
  color: var(--control-fg-on-solid);
  border-color: var(--control-border-primary);
  /* No shadow at rest per latest feedback */
  box-shadow: none;
}

@media (hover: hover) {
  .btn[data-variant="primary"]:hover:not(:disabled) {
    background-color: var(--control-bg-theme-hover);
    border-color: var(--control-border-primary-hover);
    /* Maintain darker bottom lip on hover */
    box-shadow: inset 0 -3px 0 0 var(--control-border-primary-pressed);
  }
}

.btn[data-variant="primary"]:active:not(:disabled) {
  background-color: var(--control-bg-theme-pressed);
  border-color: var(--control-border-primary-pressed);
  /* Pressed state: flat/inset look */
  box-shadow: inset 0 0 0 1px var(--control-border-primary-pressed);
}

/* --- Secondary Button --- */
.btn[data-variant="secondary"] {
  background-color: var(--control-bg-secondary);
  color: var(--surface-fg-primary);
  border: 1px solid var(--control-border-secondary);
}

@media (hover: hover) {
  .btn[data-variant="secondary"]:hover:not(:disabled) {
    /* 1px top/sides, 3px bottom simulated via box-shadow to avoid layout shift */
    box-shadow: inset 0 -3px 0 0 var(--control-border-secondary-hover);
    background-color: var(--control-bg-secondary-hover);
    border-color: var(--control-border-secondary-hover);
  }
}

.btn[data-variant="secondary"]:active:not(:disabled),
.btn[data-variant="secondary"].active {
  background-color: var(--control-bg-secondary-pressed);
  border-color: var(--control-border-secondary-pressed);
  /* Fix: Use box-shadow to simulate thicker border instead of changing border-width */
  box-shadow: inset 0 0 0 1px var(--control-border-secondary-pressed);
}

/* --- Tertiary Button --- */
.btn[data-variant="tertiary"] {
  background: none;
  color: var(--control-fg-tertiary);
  border-color: transparent;
}

@media (hover: hover) {
  .btn[data-variant="tertiary"]:hover:not(:disabled) {
    background-color: var(--control-bg-tertiary-hover);
    color: var(--control-fg-tertiary-hover);
    border-color: var(--control-border-tertiary-hover);
    /* 1px top/sides, 2px bottom simulated via box-shadow to avoid layout shift */
    box-shadow: inset 0 -2px 0 0 var(--control-border-tertiary-hover);
  }
}

.btn[data-variant="tertiary"]:active:not(:disabled) {
  background-color: var(--control-bg-tertiary-pressed);
  color: var(--control-fg-tertiary-hover);
  border-color: var(--control-border-tertiary-pressed);
}

/* --- Quaternary Button --- */
.btn[data-variant="quaternary"] {
  background: none;
  color: var(--control-fg-quaternary);
}

@media (hover: hover) {
  .btn[data-variant="quaternary"]:hover:not(:disabled) {
    background-color: var(--control-bg-quaternary-hover);
    color: var(--control-fg-quaternary-hover);
    border-color: var(--control-border-quaternary-hover);
  }
}

.btn[data-variant="quaternary"]:active:not(:disabled) {
  background-color: var(--control-bg-quaternary-pressed);
  color: var(--control-fg-quaternary-hover);
  border-color: var(--control-border-quaternary-pressed);
}

/* --- On Solid Button --- */
.btn[data-variant="on-solid"] {
  background: none;
  color: var(--control-fg-on-solid);
  border: 1px solid transparent;
  /* Match typical button border width */
  box-shadow: none;
}

@media (hover: hover) {
  .btn[data-variant="on-solid"]:hover:not(:disabled) {
    background-color: var(--control-bg-on-solid-hover);
    border-color: var(--control-border-tertiary-hover);
    /* Thicker 2px bottom lip ONLY on hover per latest feedback */
    box-shadow: inset 0 -2px 0 0 var(--control-border-tertiary-hover);
  }
}

.btn[data-variant="on-solid"]:active:not(:disabled) {
  background-color: var(--control-bg-on-solid-pressed);
  border-color: var(--control-border-tertiary-pressed);
  /* Pressed state: flat/inset look */
  box-shadow: inset 0 0 0 1px var(--control-border-tertiary-pressed);
}

/* --- Destructive Button --- */
/* --- Destructive Button --- */
.btn[data-variant="destructive"] {
  background-color: var(--control-bg-destructive);
  color: var(--control-fg-destructive);
  border-color: var(--control-border-destructive);
  box-shadow: inset 0 -2px 0 0 var(--control-border-destructive);
}

@media (hover: hover) {
  .btn[data-variant="destructive"]:hover:not(:disabled) {
    background-color: var(--control-bg-destructive-hover);
    border-color: var(--control-border-destructive);
    box-shadow: inset 0 -2px 0 0 var(--control-bg-destructive-pressed);
  }
}

.btn[data-variant="destructive"]:active:not(:disabled) {
  background-color: var(--control-bg-destructive-pressed);
  border-color: var(--control-border-destructive);
  box-shadow: inset 0 -2px 0 0 var(--control-bg-destructive-pressed);
}

/* --- Alert Button (Light Red) --- */
.btn[data-variant="alert"] {
  background-color: var(--control-bg-alert);
  color: var(--control-fg-alert);
  border-color: var(--control-border-alert);
  box-shadow: inset 0 -2px 0 0 var(--control-border-alert);
}

@media (hover: hover) {
  .btn[data-variant="alert"]:hover:not(:disabled) {
    background-color: var(--control-bg-alert-hover);
    color: var(--control-fg-alert-hover);
    border-color: var(--control-border-alert-hover);
    box-shadow: inset 0 -2px 0 0 var(--control-border-alert-hover);
  }
}

.btn[data-variant="alert"]:active:not(:disabled) {
  background-color: var(--control-bg-alert-pressed);
  color: var(--control-fg-alert-pressed);
  border-color: var(--control-border-alert-pressed);
  box-shadow: inset 0 -1px 0 0 var(--control-border-alert-pressed);
}

/* --- Warning Button --- */
.btn[data-variant="warning"] {
  background-color: var(--control-bg-warning);
  color: var(--control-fg-warning);
  border-color: var(--control-border-warning);
  box-shadow: inset 0 -2px 0 0 var(--control-border-warning);
}

@media (hover: hover) {
  .btn[data-variant="warning"]:hover:not(:disabled) {
    background-color: var(--control-bg-warning-hover);
    color: var(--control-fg-warning-hover);
    border-color: var(--control-border-warning-hover);
    box-shadow: inset 0 -2px 0 0 var(--control-border-warning-hover);
  }
}

.btn[data-variant="warning"]:active:not(:disabled) {
  background-color: var(--control-bg-warning-pressed);
  color: var(--control-fg-warning-pressed);
  border-color: var(--control-border-warning-pressed);
  box-shadow: inset 0 -1px 0 0 var(--control-border-warning-pressed);
}

/* --- Success Button --- */
.btn[data-variant="success"] {
  background-color: var(--control-bg-success);
  color: var(--control-fg-success);
  border-color: var(--control-border-success);
  box-shadow: inset 0 -2px 0 0 var(--control-border-success);
}

@media (hover: hover) {
  .btn[data-variant="success"]:hover:not(:disabled) {
    background-color: var(--control-bg-success-hover);
    color: var(--control-fg-success-hover);
    border-color: var(--control-border-success-hover);
    box-shadow: inset 0 -2px 0 0 var(--control-border-success-hover);
  }
}

.btn[data-variant="success"]:active:not(:disabled) {
  background-color: var(--control-bg-success-pressed);
  color: var(--control-fg-success-pressed);
  border-color: var(--control-border-success-pressed);
  box-shadow: inset 0 -1px 0 0 var(--control-border-success-pressed);
}

/* --- Info Button --- */
.btn[data-variant="info"] {
  background-color: var(--control-bg-info);
  color: var(--control-fg-info);
  border-color: var(--control-border-info);
  box-shadow: inset 0 -2px 0 0 var(--control-border-info);
}

@media (hover: hover) {
  .btn[data-variant="info"]:hover:not(:disabled) {
    background-color: var(--control-bg-info-hover);
    color: var(--control-fg-info-hover);
    border-color: var(--control-border-info-hover);
    box-shadow: inset 0 -2px 0 0 var(--control-border-info-hover);
  }
}

.btn[data-variant="info"]:active:not(:disabled) {
  background-color: var(--control-bg-info-pressed);
  color: var(--control-fg-info-pressed);
  border-color: var(--control-border-info-pressed);
  box-shadow: inset 0 -1px 0 0 var(--control-border-info-pressed);
}

/* ======================================================================== */
/*                              GLOBAL STATES                               */
/* ======================================================================== */

/* --- Active / Selected State --- */
/* Used for toggles, multi-select triggers, etc. */
.btn[data-active="true"] {
  background-color: var(--control-bg-selected);
  color: var(--control-fg-selected);
  border-color: var(--control-border-selected) !important;
  /* 1px border + 1px inset shadow = 2px total visual border per Figma 22807:54015 */
  box-shadow: inset 0 0 0 1px var(--control-border-selected) !important;
}

@media (hover: hover) {
  .btn[data-active="true"]:hover:not(:disabled) {
    background-color: var(--control-bg-selected-hover);
    color: var(--control-fg-selected-hover);
    border-color: var(--control-border-selected-hover) !important;
    /* 1px border + 1px all-around inset + 2px bottom emphasis = 2px sides/top, 4px bottom */
    box-shadow: inset 0 0 0 1px var(--control-border-selected), inset 0 -2px 0 0 var(--control-border-selected) !important;
  }
}

.btn[data-active="true"]:active:not(:disabled) {
  background-color: var(--control-bg-selected-hover);
  border-color: var(--control-border-selected-hover) !important;
  /* Pressed state is flat 2px inset */
  box-shadow: inset 0 0 0 2px var(--control-border-selected-hover) !important;
}