/* src/components/SearchInput.module.css */

.wrapper {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  padding-left: var(--spacing-2);
  /* padding-right is set per-size for better balance */
  border-radius: var(--radius-md);
  border: 1px solid transparent;
  transition: all 0.2s ease;
  width: 100%;
  outline: none;
}

/* --- Sizes --- */
.wrapper[data-size="sm"] {
  height: var(--control-height-sm);
  min-height: var(--control-height-sm);
  font-size: var(--font-size-sm);
  --search-icon-size: var(--icon-size-sm);
}

.wrapper[data-size="md"] {
  height: 38px;
  /* Standardized height for md search */
  min-height: 38px;
  font-size: var(--font-size-md);
  --search-icon-size: var(--icon-size-md);
}

/* --- Flavors --- */

/* Instant (Filter) - Default */
.wrapper[data-flavor="instant"] {
  background-color: var(--search-input-bg-primary);
  border-color: var(--search-input-border-primary);
  color: var(--search-input-fg-primary);
  padding-right: var(--spacing-2);
  /* Default */
}

.wrapper[data-flavor="instant"][data-size="sm"] {
  padding-right: 6px;
  /* Matches 6px v-gap for xs button */
}

.wrapper[data-flavor="instant"][data-size="md"] {
  padding-right: 9px;
  /* Matches 9px v-gap for xs button (20px) in 38px container */
}

.wrapper[data-flavor="instant"]:hover {
  border-color: var(--control-border-tertiary-hover);
}

.wrapper[data-flavor="instant"]:focus-within {
  border-color: var(--search-input-focused-border-theme);
  box-shadow: 0 0 0 var(--ring-width-focus) var(--control-focus-ring-standard);
}

/* Trigger (Action) - TopNav Style */
.wrapper[data-flavor="trigger"] {
  background-color: var(--top-nav-search-bg);
  border: none;
  padding-right: var(--spacing-0p5);
  /* 2px internal margin for button */
  gap: var(--spacing-1);
  color: var(--top-nav-fg);
  /* On-solid text in rest state */
  --search-icon-size: var(--icon-size-lg);
}

.wrapper[data-flavor="trigger"] input::placeholder {
  color: var(--top-nav-fg-secondary);
}

.wrapper[data-flavor="trigger"]:hover {
  background-color: var(--top-nav-search-bg-hover);
}

.wrapper[data-flavor="trigger"]:focus-within {
  background-color: var(--top-nav-search-focused-bg);
  color: var(--top-nav-search-focused-fg);
  box-shadow: 0 0 0 var(--ring-width-focus) var(--control-focus-ring-standard);
}

.wrapper[data-flavor="trigger"]:focus-within input {
  color: var(--top-nav-search-focused-fg);
  caret-color: var(--top-nav-search-focused-caret);
}

.wrapper[data-flavor="trigger"]:focus-within input::placeholder {
  color: var(--top-nav-search-focused-placeholder);
}


/* --- Child Styles --- */

/* The Search Icon */
.searchIcon {
  color: var(--surface-fg-quinary);
  flex-shrink: 0;
  font-size: var(--search-icon-size);
}

.wrapper input {
  all: unset;
  font-family: var(--font-family-sans);
  color: inherit;
  flex: 1;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  outline: none;
  padding: 0;
}

.wrapper input::placeholder {
  color: var(--control-fg-placeholder);
  transition: color 0.2s ease;
}

/* --- Action Button (Trigger Flavor) --- */
.triggerButtonWrapper {
  height: 100%;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  padding: var(--spacing-0p5) 0;
  /* 2px top/bottom padding */
}

.triggerButton {
  height: 100% !important;
  /* Force to fill the 28px available space */
  aspect-ratio: 1;
  min-width: unset !important;
  width: auto !important;
}

/* Clear Button */
.clearButton {
  flex-shrink: 0;
  color: inherit !important;
  /* Inherit TopNav white/dark colors */
}

/* We rely on the wrapper's gap (4px) for spacing */

.visuallyHidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}